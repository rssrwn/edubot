<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>EduBot</title>
  <link rel="stylesheet" type="text/css" href="base_style.css">
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
</head>
<body onLoad="request()">
  <div id="page">
    <div id="bannerDiv">
      <h1>EduBot</h1>
      <ul>
        <li style="display: inline-block; padding: 0% 2%;"><a href="http://www.doc.ic.ac.uk/project/2017/271/g1727114/web">Home</a></li>
        <li style="display: inline-block; padding: 0% 2%;"><a href=" http://www.doc.ic.ac.uk/project/2017/271/g1727114/web/high_scores.html">High Scores</a></li>
      </ul>
    </div>
    <div id="contentDiv">
      <h3>High Scores</h3>
      <script>
      function request() {
        httpGet("https://edubot-backend.herokuapp.com/high_score", buildTable);
      }
      
      function buildTable(x) {
        let data = JSON.parse(x);
        var table = document.createElement("TABLE");
        table.setAttribute("id", "high_scores");
        table.setAttribute("style", "width:30%");
        for(let i = 0; i < data.length; i++) {
          let e = data[i];
          console.log(e);
          addElem(table, i, e.uname, e.level, e.score);
        }
        document.getElementById("contentDiv").appendChild(table);
      }

      function addElem(table, row, uname, level, score) {
        console.log("add elem");
        var row = table.insertRow(0);
        var cell1 = row.insertCell(0);
        var cell2 = row.insertCell(1);
        var cell3 = row.insertCell(2);
        cell1.innerHTML = uname;
        cell2.innerHTML = level;
        cell3.innerHTML = score;
      }

      function httpGet(url, callback) {
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.onreadystatechange = function() {
          if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
            callback(xmlHttp.responseText);
        }
        xmlHttp.open("GET", url, true); // true for asynchronous
        xmlHttp.send();
      }
      </script>

    </div>
  </div>
</body>
</html>
